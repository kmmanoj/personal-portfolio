<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Setting up a local ethereum blockchain network | Manoj Vignesh K M</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Setting up a local ethereum blockchain network" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Set up a local ethereum blockchain network to learn, experiment, break and build decentralized apps (dApps)" />
<meta property="og:description" content="Set up a local ethereum blockchain network to learn, experiment, break and build decentralized apps (dApps)" />
<link rel="canonical" href="https://www.kmmanoj.me/2023/03/25/setting-up-a-local-ethereum-blockchain-network.html" />
<meta property="og:url" content="https://www.kmmanoj.me/2023/03/25/setting-up-a-local-ethereum-blockchain-network.html" />
<meta property="og:site_name" content="Manoj Vignesh K M" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-25T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Setting up a local ethereum blockchain network" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-25T00:00:00-04:00","datePublished":"2023-03-25T00:00:00-04:00","description":"Set up a local ethereum blockchain network to learn, experiment, break and build decentralized apps (dApps)","headline":"Setting up a local ethereum blockchain network","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.kmmanoj.me/2023/03/25/setting-up-a-local-ethereum-blockchain-network.html"},"url":"https://www.kmmanoj.me/2023/03/25/setting-up-a-local-ethereum-blockchain-network.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet"> 
  <style>
    body {
      font-family: 'Ubuntu', sans-serif;
    }
  </style><link type="application/atom+xml" rel="alternate" href="https://www.kmmanoj.me/feed.xml" title="Manoj Vignesh K M" />
    





  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="https://www.kmmanoj.me">Manoj Vignesh K M</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
                <!-- pass -->
              
                <!-- pass -->
              
                <a class="page-link" href="/experience/">Experience</a>
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <a class="page-link" href="/blogs/">Blogs</a>
              
              <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              
                <!-- pass -->
              </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <a href="/blogs">&lt; To Blog home</a>

<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Setting up a local ethereum blockchain network</h1>
    <span>
      
        
        <a href="/tag/beginner"><code class="highligher-rouge"><nobr>beginner</nobr></code>&nbsp;</a>
      
        
        <a href="/tag/application"><code class="highligher-rouge"><nobr>application</nobr></code>&nbsp;</a>
      
        
        <a href="/tag/blockchain"><code class="highligher-rouge"><nobr>blockchain</nobr></code>&nbsp;</a>
      
        
        <a href="/tag/ethereum"><code class="highligher-rouge"><nobr>ethereum</nobr></code>&nbsp;</a>
      
    </span>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-03-25T00:00:00-04:00" itemprop="datePublished">Mar 25, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>The Ethereum blockchain is similar to the Bitcoin blockchain in that it is a distributed ledger that records all transactions. However, ethereum blockchain provides a platform to build decentralized apps in the form of smart contracts.</p>

<p>Given that the ethereum blockchain is a platform to build decentralised applications, it is key to learn this technology as it may revolutionize the way applications are built.</p>

<p>In this article, we shall go through how to setup a local blockchain network to learn, experiment and build on Ethereum.</p>

<h2 id="installing-geth">Installing geth</h2>

<p>Geth (go-ethereum) is a Go implementation of Ethereum. It is an easy to setup ethereum client. Download and install geth from <a href="https://geth.ethereum.org/downloads">https://geth.ethereum.org/downloads</a></p>

<h2 id="create-the-first-node">Create the first node</h2>

<p>An ethereum blockchain node is any system that has a storage and is able to perform computation (using processor and memory). In geth world, each geth process can be considered the compute scope of a node, and a directory can be considered as an isolated storage space for that node. Hence, we create first node by creating a directory. Let us call it <code class="language-plaintext highlighter-rouge">node00</code>.</p>

<blockquote>
  <p>For ease of reference, <code class="language-plaintext highlighter-rouge">/rootnet</code> shall be used as the base directory</p>
</blockquote>

<p>Create a directory in the base directory by the name <code class="language-plaintext highlighter-rouge">node00</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/node00
</code></pre></div></div>

<h2 id="create-the-first-account">Create the first account</h2>

<p>An account, technically, is a cryptographic public-private key pair. An account is referenced by a 40-digit (20 bytes) hex code that is derived from the public key.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">address</span> <span class="o">=</span> <span class="nf">sha3</span><span class="p">(</span><span class="n">publicKey</span><span class="p">)[</span><span class="o">-</span><span class="mi">40</span><span class="p">:]</span>
</code></pre></div></div>

<p>While, the private key is kept safe and secret by the account holder.</p>

<p>To create an account, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth <span class="nt">--datadir</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/node00 account new
</code></pre></div></div>

<p>Note down the address of the account displayed.</p>

<h2 id="configure-the-genesis-block">Configure the genesis block</h2>

<p>A genesis block is the very first block in a blockchain network. To create such a block for the blockchain in setup, create a file called <code class="language-plaintext highlighter-rouge">genesis.json</code> in the base directory with the following content:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"config"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"chainId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1337</span><span class="p">,</span><span class="w">
        </span><span class="nl">"homesteadBlock"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"eip155Block"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"eip158Block"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"eip150Block"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"difficulty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"400000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"gasLimit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2100000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"alloc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"&lt;Acc1 Addr&gt;"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Replace <code class="language-plaintext highlighter-rouge">&lt;Acc1 Addr&gt;</code> with the address of the account created in the previous step. The above configuration allocates <code class="language-plaintext highlighter-rouge">1 ether</code> to the account.</p>

<blockquote>
  <p>chainId 1337 is typically used for geth private chains</p>
</blockquote>

<blockquote>
  <p>EIP stands for Ethereum Improvement Proposal. It is analogous to RFCs in internet world. Refer <a href="https://github.com/ethereum/EIPs/tree/master/EIPS">EIPs github repository</a> to learn more about EIPs.</p>
</blockquote>

<h2 id="initialize-the-first-node">Initialize the first node</h2>

<p>Initialise the ethereum blockchain by running geth and feeding it with the genesis block.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth <span class="nt">--datadir</span> <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/node00 init <span class="si">$(</span><span class="nb">pwd</span><span class="si">)</span>/genesis.json
</code></pre></div></div>

<h2 id="optional-ethereum-network-stats-dashboard">[Optional] Ethereum network stats dashboard</h2>

<p>Ethereum network statistics dashboard allows one to visualise the health of different nodes in the ethereum blockchain network. Download ethereum network stats dashboard from github and set it up:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/cubedro/eth-netstats
<span class="nb">cd </span>eth-netstats
npm <span class="nb">install
sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> grunt-cli
</code></pre></div></div>

<p>Run the ethereum network stats dashboard:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">WS_SECRET</span><span class="o">=</span>eth-netstats-password npm start
</code></pre></div></div>

<blockquote>
  <p>You could use a different <code class="language-plaintext highlighter-rouge">WS_SECRET</code> if necessary.</p>
</blockquote>

<p>The ethereum network stats dashboard should be running at http://localhost:3000</p>

<h2 id="optional-block-explorer---blockscout">[Optional] Block explorer - Blockscout</h2>

<p>Block explorer helps visualise the blocks created and its related information in the ethereum blockchain. Download blockscout from github:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/blockscout/blockscout.git
</code></pre></div></div>

<p>Before starting the visualizer, change all occurence of <code class="language-plaintext highlighter-rouge">host.docker.internal</code> under the blockscout directory to the IP address of your computer. Then, run blockscout:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>blockscout/docker-compose
docker-compose <span class="nt">-f</span> docker-compose-no-build-geth.yml up
</code></pre></div></div>

<p>The block explorer dashboard should be running at http://localhost:4000</p>

<h2 id="start-the-node">Start the node</h2>

<p>Now run the first node</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>geth <span class="nt">--identity</span> <span class="s2">"node00"</span> <span class="nt">--datadir</span><span class="o">=</span>./node00 <span class="nt">--networkid</span><span class="o">=</span>1337 <span class="nt">--syncmode</span><span class="o">=</span>full <span class="nt">--gcmode</span><span class="o">=</span>archive <span class="nt">--http</span> <span class="nt">--http</span>.corsdomain<span class="o">=</span><span class="s2">"*"</span> <span class="nt">--http</span>.api<span class="o">=</span>web3,eth,debug,personal,net,miner,admin <span class="nt">--allow-insecure-unlock</span> <span class="nt">--http</span>.addr <span class="s2">"0.0.0.0"</span> <span class="nt">--http</span>.port 8000 <span class="nt">--authrpc</span>.port 30000 <span class="nt">--port</span> 33000 <span class="nt">--ethstats</span><span class="o">=</span>node00:eth-netstats-password@localhost:3000 <span class="nt">--mine</span>
</code></pre></div></div>

<blockquote>
  <p>Remove <code class="language-plaintext highlighter-rouge">--ethstats</code> option if you skipped step 6</p>
</blockquote>

<p>Note down the enode number in the logs of the process</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
Started P2P networking self=enode://0123456789abcdef0123456...@127.0.0.1:33000
...
</code></pre></div></div>

<h2 id="setup-and-create-other-nodes">Setup and create other nodes</h2>

<p>The other nodes could use <code class="language-plaintext highlighter-rouge">node00</code> as a peer to learn about the blockchain built so far. Hence, in the previous step enode number was noted down so that the new node being created can use <code class="language-plaintext highlighter-rouge">node00</code> as the peer. The <code class="language-plaintext highlighter-rouge">geth.sh</code> file for the node:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

geth <span class="nt">--identity</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nt">--datadir</span><span class="o">=</span>./<span class="nv">$1</span> <span class="nt">--networkid</span><span class="o">=</span>1337 <span class="nt">--syncmode</span><span class="o">=</span>full <span class="nt">--gcmode</span><span class="o">=</span>archive <span class="nt">--http</span> <span class="nt">--http</span>.corsdomain<span class="o">=</span><span class="s2">"*"</span> <span class="nt">--http</span>.api<span class="o">=</span>web3,eth,debug,personal,net,miner <span class="nt">--allow-insecure-unlock</span> <span class="nt">--bootnodes</span><span class="o">=</span>enode://&lt;the-saved-enode-addr&gt;@127.0.0.1:33000 <span class="nt">--http</span>.port <span class="k">$((</span><span class="m">8000</span><span class="o">+</span><span class="nv">$2</span><span class="k">))</span> <span class="nt">--authrpc</span>.port <span class="k">$((</span><span class="m">30000</span><span class="o">+</span><span class="nv">$2</span><span class="k">))</span> <span class="nt">--port</span> <span class="k">$((</span><span class="m">33000</span><span class="o">+</span><span class="nv">$2</span><span class="k">))</span> <span class="nt">--ethstats</span><span class="o">=</span><span class="nv">$1</span>:eth-netstats-password@localhost:3000 <span class="nt">--mine</span>
</code></pre></div></div>

<p>Replace <code class="language-plaintext highlighter-rouge">&lt;the-saved-enode-addr&gt;</code> with the saved enode address.</p>

<p>To create node n (say node n is identified as node0n):</p>

<ul>
  <li>Create a directory <code class="language-plaintext highlighter-rouge">node0n</code></li>
  <li>Initialize the node with genesis block:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  geth <span class="nt">--datadir</span> /rootnet/node0n init /rootnet/genesis.json
</code></pre></div>    </div>
  </li>
  <li>Create an account
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  geth <span class="nt">--datadir</span> /rootnet/node0n account new
</code></pre></div>    </div>
  </li>
  <li>Run the node
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ./geth.sh node0n
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>To get CLI access to a node, say node00, one could run <code class="language-plaintext highlighter-rouge">geth attach http://localhost:8000</code>. Identify the HTTP port in which the node is running to connect to that node.</p>
</blockquote>

<h2 id="setup-metamask">Setup metamask</h2>

<p>MetaMask is a popular cryptocurrency wallet that enables users to interact with decentralized applications (dApps) on the Ethereum blockchain. It is available in the form of browser extension too.</p>

<p>Download metamask extension for your favorite browser. Then,</p>

<ul>
  <li>Navigate to <code class="language-plaintext highlighter-rouge">Settings &gt; Networks &gt; Add Network</code></li>
  <li>Set <code class="language-plaintext highlighter-rouge">New RPC URL</code> to be <code class="language-plaintext highlighter-rouge">http://localhost:8000</code> [ Recall that this is the http server endpoint served by <code class="language-plaintext highlighter-rouge">node00</code> ]</li>
  <li>Set <code class="language-plaintext highlighter-rouge">Chain ID</code> to be <code class="language-plaintext highlighter-rouge">1337</code></li>
  <li>Set <code class="language-plaintext highlighter-rouge">Network Name</code> and <code class="language-plaintext highlighter-rouge">Currency symbol</code> of your interest.</li>
  <li>Set <code class="language-plaintext highlighter-rouge">Block explorer URL</code> to be <code class="language-plaintext highlighter-rouge">http://localhost:4000</code> [ Ensure you followed the steps to setup <code class="language-plaintext highlighter-rouge">blockscout</code> ]</li>
</ul>

<p>Now, import the account in <code class="language-plaintext highlighter-rouge">node00</code> to metamask.</p>

<ul>
  <li>Select <code class="language-plaintext highlighter-rouge">Import account</code> option displayed in the dropdown menu when clicked on the profile logo on the right top corner of the window.</li>
  <li>Find the private key:
    <ul>
      <li>Install <code class="language-plaintext highlighter-rouge">web3</code> module in python as: <code class="language-plaintext highlighter-rouge">pip3 install web3</code></li>
      <li>In a python interpreter, run the following to retrieve the private key:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">from</span> <span class="n">web3.auto</span> <span class="kn">import</span> <span class="n">w3</span>
  <span class="n">keyfile</span> <span class="o">=</span> <span class="s">'UTC--...'</span>
  <span class="n">password</span> <span class="o">=</span> <span class="s">'&lt;password&gt;'</span>
  <span class="n">w3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="n">account</span><span class="p">.</span><span class="nf">decrypt</span><span class="p">(</span><span class="nf">open</span><span class="p">(</span><span class="sa">f</span><span class="s">'/rootnet/node00/keystore/</span><span class="si">{</span><span class="n">keyfile</span><span class="si">}</span><span class="s">'</span><span class="p">).</span><span class="nf">read</span><span class="p">(),</span> <span class="n">password</span><span class="p">)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Paste the obtained private key in the dialog box that popped up on metamask as <code class="language-plaintext highlighter-rouge">Import account</code> was clicked.</li>
</ul>

<h2 id="write-and-deploy-contract-using-remix">Write and deploy contract using remix</h2>

<p>Remix is a web application that allows users to write, compile and deploy smart contracts to ethereum blockchain networks interactively. It is an IDE for decentralized application development.</p>

<ul>
  <li>Navigate to <a href="https://remix.ethereum.org/">https://remix.ethereum.org/</a></li>
  <li>Select the <code class="language-plaintext highlighter-rouge">Deploy &amp; run transactions</code> option on the left navigation bar</li>
  <li>From the <code class="language-plaintext highlighter-rouge">Environment</code> dropdown, select <code class="language-plaintext highlighter-rouge">Injected Provider - MetaMask</code> option</li>
  <li>The metamask window should pop up asking consent to provide access to remix. Approve it.</li>
  <li>Observe that your account address is seen in the <code class="language-plaintext highlighter-rouge">account</code> field of the <code class="language-plaintext highlighter-rouge">Deploy &amp; run transactions</code> sub-window.</li>
</ul>

<p>Now, you can write a contract or use a pre-existing one in the remix IDE, compile and deploy them to your blockchain network.</p>

<h2 id="reference">Reference</h2>

<p>[1] https://medium.com/datawallet-blog/how-to-deploy-a-local-private-ethereum-blockchain-c2b497f068f4</p>

  </div>


  <a href="/blogs">&lt; To Blog home</a><a class="u-url" href="/2023/03/25/setting-up-a-local-ethereum-blockchain-network.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Manoj Vignesh K M</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">

            <li><p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://www.linkedin.com/in/kmmanoj"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">kmmanoj</span></a></li><li><a href="https://www.twitter.com/kmmanojv96"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">kmmanojv96</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Manoj&#39;s articulated knowledge base of cybersecurity research</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
